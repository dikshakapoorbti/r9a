var q=Object.defineProperty,A=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var k=(e,s,r)=>s in e?q(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,p=(e,s)=>{for(var r in s||(s={}))K.call(s,r)&&k(e,r,s[r]);if(C)for(var r of C(s))z.call(s,r)&&k(e,r,s[r]);return e},g=(e,s)=>A(e,T(s));var E=(e,s,r)=>new Promise((f,m)=>{var h=o=>{try{c(r.next(o))}catch(i){m(i)}},n=o=>{try{c(r.throw(o))}catch(i){m(i)}},c=o=>o.done?f(o.value):Promise.resolve(o.value).then(h,n);c((r=r.apply(e,s)).next())});import{r as l,j as t}from"./react-vendor-BXwyOXP-.js";import{g as B,i as M,a as U,c as F,s as H}from"./firebase-vendor-e8d3nifc.js";import"./emailjs-vendor-CpgQHUqy.js";import"./vendor-DdoYgruZ.js";const J={apiKey:"AIzaSyC30KLJxmRUz086twIS0SPBsHX2sjdRy8k",authDomain:"retrospecta-web.firebaseapp.com",projectId:"retrospecta-web",storageBucket:"retrospecta-web.firebasestorage.app",messagingSenderId:"412926445598",appId:"1:412926445598:web:19e364c18bf8b7cc3c460f"},L=M(J),W=B(L),te=()=>{const[e,s]=l.useState({email:"",phone:"",company:"",message:""}),[r,f]=l.useState("+91"),[m,h]=l.useState(""),[n,c]=l.useState({}),[o,i]=l.useState(!1),[x,b]=l.useState(""),j=l.useRef(null),I=a=>a.trim().split(/\s+/).filter(Boolean).length,D=a=>/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(a.trim()),P=a=>a.replace(/\D/g,"").length>=7,y=a=>[/<script/i,/javascript:/i,/on\w+\s*=/i,/<iframe/i,/eval\(/i,/document\./i,/window\./i].some(w=>w.test(a)),_=a=>E(null,null,function*(){if(a.preventDefault(),b(""),c({}),m)return;const u=Number(localStorage.getItem("contact_last_submit_ts")||0);if(Date.now()-u<6e4){b("Please wait a minute before submitting again.");return}const d={};D(e.email)||(d.email="Enter a valid email");const S=e.phone.replace(/\D/g,"");if(P(S)||(d.phone="Enter a valid phone"),I(e.message)<2&&(d.message="Describe your project in at least 20 words"),y(e.email)||y(e.company)||y(e.message)){b("Invalid input detected. Please remove any HTML or script content.");return}if(Object.keys(d).length){c(d);return}i(!0);const N=`${r}${S}`,R={email:e.email.trim(),phone:N,company:e.company.trim(),message:e.message.trim(),createdAt:H()};try{yield U(F(W,"contactRequests"),R);try{const v={to_email:"dikshakapoorbti@gmail.com",from_name:e.email.trim(),from_email:e.email.trim(),phone:N,company:e.company.trim()||"N/A",message:e.message.trim(),submission_time:new Date().toLocaleString()};void 0&&void 0&&void 0||console.warn("EmailJS not configured. Please set up .env file with EmailJS credentials.")}catch(v){console.error("Email notification failed:",v)}s({email:"",phone:"",company:"",message:""}),localStorage.setItem("contact_last_submit_ts",String(Date.now())),setTimeout(()=>i(!1),3e3)}catch(v){b("Could not save your request. Please try again later."),i(!1)}});return t.jsxs("form",{className:"space-y-4",onSubmit:_,children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),t.jsx("input",{type:"email",required:!0,value:e.email,onChange:a=>s(g(p({},e),{email:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"your@email.com"}),n.email&&t.jsx("p",{className:"mt-2 text-sm text-red-600",children:n.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("select",{value:r,onChange:a=>{f(a.target.value),setTimeout(()=>{var u;return(u=j.current)==null?void 0:u.focus()},0)},className:"px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white appearance-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E")`,backgroundPosition:"right 0.75rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.25em 1.25em"},children:[t.jsx("option",{value:"+91",children:"India (+91)"}),t.jsx("option",{value:"+1",children:"United States (+1)"}),t.jsx("option",{value:"+44",children:"United Kingdom (+44)"}),t.jsx("option",{value:"+61",children:"Australia (+61)"}),t.jsx("option",{value:"+971",children:"UAE (+971)"})]}),t.jsx("input",{type:"tel",required:!0,value:e.phone,onChange:a=>s(g(p({},e),{phone:a.target.value.replace(/[^0-9\s-]/g,"")})),ref:j,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Phone number"})]}),n.phone&&t.jsx("p",{className:"mt-2 text-sm text-red-600",children:n.phone})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),t.jsx("input",{type:"text",value:e.company,onChange:a=>s(g(p({},e),{company:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Your Company Name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Details"}),t.jsx("textarea",{rows:4,required:!0,value:e.message,onChange:a=>s(g(p({},e),{message:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Tell us about your project requirements..."}),n.message&&t.jsx("p",{className:"mt-2 text-sm text-red-600",children:n.message})]}),t.jsx("input",{type:"text",value:m,onChange:a=>h(a.target.value),className:"hidden","aria-hidden":"true",tabIndex:-1,autoComplete:"off"}),t.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-70 disabled:cursor-not-allowed",children:o?"Request Sent! We'll call you soon.":"Request Callback"}),x&&t.jsx("div",{className:"text-center text-red-600 text-sm font-medium",children:x}),o&&!x&&t.jsx("div",{className:"text-center text-green-600 font-medium",children:"Thank you! We'll contact you within 24â€“48 hours."})]})};export{te as default};
