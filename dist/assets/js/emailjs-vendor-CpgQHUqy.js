var H=Object.defineProperty;var g=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var w=(e,t,r)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))S.call(t,r)&&w(e,r,t[r]);if(g)for(var r of g(t))V.call(t,r)&&w(e,r,t[r]);return e};var b=(e,t,r)=>new Promise((a,i)=>{var m=o=>{try{c(r.next(o))}catch(d){i(d)}},n=o=>{try{c(r.throw(o))}catch(d){i(d)}},c=o=>o.done?a(o.value):Promise.resolve(o.value).then(m,n);c((r=r.apply(e,t)).next())});class h{constructor(t=0,r="Network Error"){this.status=t,this.text=r}}const F=()=>{if(typeof localStorage!="undefined")return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},s={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:F()},p=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},_=(e,t="https://api.emailjs.com")=>{if(!e)return;const r=p(e);s.publicKey=r.publicKey,s.blockHeadless=r.blockHeadless,s.storageProvider=r.storageProvider,s.blockList=r.blockList,s.limitRate=r.limitRate,s.origin=r.origin||t},y=(a,i,...m)=>b(null,[a,i,...m],function*(e,t,r={}){const n=yield fetch(s.origin+e,{method:"POST",headers:r,body:t}),c=yield n.text(),o=new h(n.status,c);if(n.ok)return o;throw o}),v=(e,t,r)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},K=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},k=e=>e.webdriver||!e.languages||e.languages.length===0,P=()=>new h(451,"Unavailable For Headless Browser"),B=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},E=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},O=(e,t)=>e instanceof FormData?e.get(t):e[t],j=(e,t)=>{if(E(e))return!1;B(e.list,e.watchVariable);const r=O(t,e.watchVariable);return typeof r!="string"?!1:e.list.includes(r)},L=()=>new h(403,"Forbidden"),q=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},x=(e,t,r)=>b(null,null,function*(){const a=Number((yield r.get(e))||0);return t-Date.now()+a}),T=(e,t,r)=>b(null,null,function*(){if(!t.throttle||!r)return!1;q(t.throttle,t.id);const a=t.id||e;return(yield x(a,t.throttle,r))>0?!0:(yield r.set(a,Date.now().toString()),!1)}),R=()=>new h(429,"Too Many Requests"),M=(e,t,r,a)=>b(null,null,function*(){const i=p(a),m=i.publicKey||s.publicKey,n=i.blockHeadless||s.blockHeadless,c=i.storageProvider||s.storageProvider,o=l(l({},s.blockList),i.blockList),d=l(l({},s.limitRate),i.limitRate);return n&&k(navigator)?Promise.reject(P()):(v(m,e,t),K(r),r&&j(o,r)?Promise.reject(L()):(yield T(location.pathname,d,c))?Promise.reject(R()):y("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:m,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"}))}),N=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},D=e=>typeof e=="string"?document.querySelector(e):e,A=(e,t,r,a)=>b(null,null,function*(){const i=p(a),m=i.publicKey||s.publicKey,n=i.blockHeadless||s.blockHeadless,c=s.storageProvider||i.storageProvider,o=l(l({},s.blockList),i.blockList),d=l(l({},s.limitRate),i.limitRate);if(n&&k(navigator))return Promise.reject(P());const f=D(r);v(m,e,t),N(f);const u=new FormData(f);return j(o,u)?Promise.reject(L()):(yield T(location.pathname,d,c))?Promise.reject(R()):(u.append("lib_version","4.4.1"),u.append("service_id",e),u.append("template_id",t),u.append("user_id",m),y("/api/v1.0/email/send-form",u))}),C={init:_,send:M,sendForm:A,EmailJSResponseStatus:h};export{C as e};
